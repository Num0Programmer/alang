data $argc_fmt = { b "Number of arguments = %d\n", b 0 }
data $byte_fmt = { b "%c\n", b 0 }


export function w $main(w %argc, l %argv) {
@start
    %i =l loadl 0
    call $printf(l $argc_fmt, ..., w %argc)

@load_arg
    %arg =l loadl %argv

@print_arg
    %ch =w loadub %arg
    %cmp =w ceqw %ch, 0  # end of string
    jnz %cmp, @exit, @print_byte
@print_byte
    call $printf(l $byte_fmt, ..., w %ch)
    %arg =l add %arg, 1
    jmp @print_arg

@exit
    ret 0
}
